<ayaxphpclass>
<!-- CIRCUITOS -->
<make object="class"> 
	<build out_file="ccircuitos.php" classname="ccircuitos" classlabel="Circuitos">
		<parse in_file="circuitos.sql" tablename="circuitos" />	
		<field name="cir_code" sequence="circuitos"/>	
		<method ObjFactoryQuerySuffix=" ORDER BY cir_date_ini asc"/>			
	</build>
</make> 
<make object="search_and_list"> 
	<build out_file="circuitos.php" classname="ccircuitos" title="Listado de Circuitos a Monitorear">
			<field name="cir_code" label="Circuito Nro" presentation="INT" />
			<field name="cir_name" label="Nombre" presentation="TEXT" />
			<field name="cir_date_ini" label="Fecha Inicio" presentation="DATERANGE" />
			<field name="cir_date_fin" label="Fecha Final" presentation="DATERANGE" />
			<field name="cir_importance_min" label="Importancia Min" presentation="INT" />	
			<field name="cir_status" label="Estado" presentation="ESTADO_CIRCUITOS" />			
			<searchfield name="cir_code"/>
			<searchfield name="cir_name"/>
			<searchfield name="cir_date_ini"/>
			<searchfield name="cir_date_fin"/>
			<searchfield name="cir_importance_min"/>
			<searchfield name="cir_status"/>
			<listfield name="cir_date_ini"/>
			<listfield name="cir_date_fin"/>		
			<listfield name="cir_status"/>			
			<listfield name="cir_code"/>
			<listfield name="cir_name"/>
			<listfield name="cir_importance_min"/>
			<action label="ver" target="circuitos_maint.php?OP=V" operation="V" >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>
			<action label="modificar" right="circuitos.circuitos.actualizar" target="circuitos_maint.php?OP=M" operation="M"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>
			<action label="modificar fecha" right="circuitos.circuitos.actualizar" target="circuitos_fecha_maint.php?OP=M" operation="M"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>				
			<action label="anular" right="circuitos.circuitos.actualizar" target="circuitos_baja_maint.php?OP=M" operation="M"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>		
			<action label="desempeño" right="circuitos.cir_groups" target="cir_groups_oper.php?OP=L" operation="L"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>				
			<action label="asignar grupo" right="circuitos.cir_groups.nuevo" target="cir_groups_maint.php?OP=N" operation="N"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>	
			<action label="grupos" right="circuitos.cir_groups" target="cir_groups.php?OP=L" operation="L"  >
				<sendfield classname="ccircuitos" name="cir_code"/>
			</action>				
	</build>
</make>
<!-- ABM DE CIRCUITOS -->
<make object="table_maint"> 
	<build out_file="circuitos_maint.php" classname="ccircuitos" title="Circuitos a Monitorear" next="circuitos.php?last=1&amp;OP=L">
	<group title="Datos Principales" id="grupo" order="1">		
		<field name="cir_code" label="Circuito Nro"  presentation="SEQUENCE" classparams="circuitos" readonly="true"/>	
		<field name="cir_name" label="Nombre" presentation="TEXT"  ismandatory="true" />		
		<field name="cir_date_ini" label="Fecha Inicio" presentation="DATE"  ismandatory="true" />		
		<field name="cir_date_fin" label="Fecha Final" presentation="DATE"  ismandatory="true" />		
		<field name="cir_importance_min" label="Importancia Min" presentation="INT"  ismandatory="true" />		
		<field name="cir_status" label="Estado" presentation="ESTADO_CIRCUITOS" initialvalue="PENDIENTE" readonly="true" />	
	</group>
		<action label="Asignar Grupo de Operadores" target="cir_groups_maint.php?OP=N"  operation="N" />		
	</build>
</make>
<make object="table_maint"> 
	<build out_file="circuitos_fecha_maint.php" classname="ccircuitos" title="Circuitos a Monitorear" next="circuitos.php?last=1&amp;OP=L">
	<group title="Datos Principales" id="grupo" order="1">	
		<field name="cir_code" label="Circuito Nro"  presentation="INT"  readonly="true"/>	
		<field name="cir_name" label="Nombre" presentation="TEXT"  readonly="true"/>		
		<field name="cir_date_ini" label="Fecha Inicio" presentation="DATE"   readonly="true"/>	
		<field name="cir_date_fin" label="Fecha Final" presentation="DATE"  ismandatory="true" />		
		<field name="cir_importance_min" label="Importancia Min" presentation="INT"  readonly="true"/>	
		<field name="cir_status" label="Estado" presentation="ESTADO_CIRCUITOS"  readonly="true"/>	
	</group>	
	</build>
</make>
<make object="table_maint"> 
	<build out_file="circuitos_baja_maint.php" classname="ccircuitos" title="Anular un Circuito">
	<group title="Datos Principales" id="grupo" order="1">	
		<field name="cir_code" label="Circuito Nro"  presentation="SEQUENCE" classparams="circuitos" readonly="true"/>	
		<field name="cir_name" label="Nombre" presentation="TEXT"  readonly="true"/>
		<field name="cir_date_ini" label="Fecha Inicio" presentation="DATE"  readonly="true"/>		
		<field name="cir_date_fin" label="Fecha Final" presentation="DATE"  readonly="true"/>	
		<field name="cir_importance_min" label="Importancia Min" presentation="INT"  readonly="true"/>		
		<field name="cir_status" label="Estado" presentation="ESTADO_CIRCUITOS" readonly="true"/>	
	</group>	
	</build>
</make>

<!-- GRUPOS  -->
<make object="class"> 
	<build out_file="ccir_groups.php" classname="ccir_groups" classlabel="Grupos">
		<parse in_file="circuitos.sql" tablename="cir_groups" />
		<field name="cirg_code" sequence="cir_groups"/>		
	</build>
</make>
<make object="search_and_list"> 
	<build out_file="cir_groups.php" classname="ccir_groups" title="Listado de Asignaciones por Circuito">
		    <field name="cirg_code" label="Grupo Nro"  presentation="INT" />	
		    <field name="cir_code" label="Circuito" presentation="CIRCUITOS" />		
		    <field name="use_code_supervisor" label="Supervisor" presentation="SUPERVISOR"  />		
			<field name="oper_grupo" label="Grupo" presentation="SELECT" valuelist="oper_grupo" />				
			<searchfield name="cir_code"/>
			<searchfield name="cirg_code"/>
			<searchfield name="use_code_supervisor"/>
			<searchfield name="oper_grupo"/>			
			<listfield name="cirg_code"/>
			<listfield name="cir_code"/>		
			<listfield name="use_code_supervisor"/>			
			<listfield name="oper_grupo"/>					
			<action label="ver" target="cir_groups_v_maint.php?OP=V" operation="V" >
				<sendfield classname="ccir_groups" name="cirg_code"/>
			</action>
			<action label="modificar" right="circuitos.cir_groups.actualizar" target="cir_groups_maint.php?OP=M" operation="M"  >
				<sendfield classname="ccir_groups" name="cirg_code"/>
			</action>	
			
			<action label="eliminar" right="circuitos.cir_groups.actualizar" target="cir_groups_maint.php?OP=B" operation="B"  >			
				<sendfield classname="ccir_groups" name="cirg_code"/>
			</action>		
			<action label="operadores" right="circuitos.cir_groups" target="/lmodules/configuracion/oper_status.php?OP=L" operation="L"  >
				<sendfield classname="ccir_groups" name="cir_code"/>			
				<sendfield classname="ccir_groups" name="cirg_code"/>
				<sendfield classname="ccir_groups" name="oper_grupo"/>
			</action>			
			<action label="desempeño" right="circuitos.cir_groups" target="cir_groups_oper.php?OP=L" operation="L"  >
				<sendfield classname="ccir_groups" name="cir_code"/>
				<sendfield classname="ccir_groups" name="cirg_code"/>
				<sendfield classname="ccir_groups" name="oper_grupo"/>
			</action>				
	</build>
</make>
<make object="table_maint"> 
	<build out_file="cir_groups_v_maint.php" classname="ccir_groups" title="Consulta de Asignación de Grupo" next="cir_groups.php?last=1&amp;OP=L">
	    <group title="Datos Principales" id="grupo" order="1">	
		<field name="cirg_code" label="Grupo Nro"  presentation="INT"  readonly="true"/>	
		<field name="cir_code" label="Circuito" presentation="CIRCUITOS"  readonly="true"/>			
		<field name="use_code_supervisor" label="Supervisor" presentation="SUPERVISOR"  readonly="true"/>	
		<field name="oper_grupo" label="Grupo" presentation="TEXT"  readonly="true"/>	
		</group>
	</build>
</make>
<make object="table_maint"> 
	<build out_file="cir_groups_maint.php" classname="ccir_groups" title="Asignación de Grupos a Circuitos" next="cir_groups.php?last=1&amp;OP=L">
	    <group title="Datos Principales" id="grupo" order="1">	
			<field name="cirg_code" label="Grupo Nro"  presentation="SEQUENCE" classparams="cir_groups" readonly="true"/>	
			<field name="cir_code" label="Circuito"  presentation="SELECTTABLE"  classparams="SELECT  cir_name,cir_code FROM circuitos where cir_status in ('PENDIENTE') order by cir_name" ismandatory="true" />		
			<field name="use_code_supervisor" label="Supervisor" presentation="SUPERVISOR"  ismandatory="true" />	
			<field name="oper_grupo" label="Grupo" presentation="SELECT" valuelist="oper_grupo" ismandatory="true"/>		
		</group>	
		<action label="Asignar Grupo de Operadores" target="cir_groups_maint.php?OP=N"  operation="N" />		
	</build>
</make>

<!-- OEPRADORES POR GRUPOS  -->
<make object="class"> 
	<build out_file="ccir_groups_oper.php" classname="ccir_groups_oper" classlabel="Operadores por Grupos">
		<parse in_file="circuitos.sql" tablename="cir_groups_oper" />			
		<field name="cirg_cant_mon_pendientes" total="true" />
		<field name="cirg_cant_mon_realizados" total="true" />
		<field name="cirg_cant_mon_ok" total="true" />
		<field name="cirg_cant_mon_mal" total="true" />
		<field name="cirg_cant_cap_pendientes" total="true" />
		<field name="cirg_cant_cap_realizados" total="true" />
		<field name="cirg_cant_cap_ok" total="true" />
		<field name="cirg_cant_cap_mal" total="true" />		
		<field name="cirg_cant_mon_cierre_forz" total="true" />			
	</build>
</make>
<make object="search_and_list"> 
	<build out_file="cir_groups_oper.php" classname="ccir_groups_oper" title="Desempeño">
		    <field name="cirg_code" label="Grupo Nro"  presentation="INT" />	
			 <field name="cir_code" label="Circ. Nro"  presentation="CIRCUITOS" />	
			<field name="use_code_operador" label="Operador" presentation="OPERADOR" />
			<field name="crit_status_ini" label="Estado Ini" presentation="CRIT_STATUS" />
			<field name="crit_status_fin" label="Estado Fin" presentation="CRIT_STATUS" />
			<field name="cirg_puntaje_prom" label="Promedio" presentation="FLOAT"/>
			<field name="cirg_cant_mon_pendientes" label="Mon. Pend." presentation="INT" total="true"/>
			<field name="cirg_cant_mon_realizados" label="Mon. Realiz" presentation="INT" total="true"/>	
			<field name="cirg_cant_mon_ok" label="Mon. OK" presentation="INT" total="true"/>
			<field name="cirg_cant_mon_mal" label="Mon. Mal" presentation="INT" total="true"/>	
			<field name="cirg_cant_mon_cierre_forz" label="C. Forzado" presentation="INT" total="true"/>				
			<field name="cirg_cant_cap_pendientes" label="Capac. Pend." presentation="INT" total="true"/>
			<field name="cirg_cant_cap_realizados" label="Capac. Realiz" presentation="INT" total="true"/>	
			<field name="cirg_cant_cap_ok" label="Capac. OK" presentation="INT" total="true"/>
			<field name="cirg_cant_cap_mal" label="Capac. Mal" presentation="INT" total="true"/>			
			<searchfield name="cirg_code"/>
			<searchfield name="cir_code"/>
			<searchfield name="use_code_operador"/>
			<searchfield name="crit_status_ini"/>
			<searchfield name="crit_status_fin"/>
			<listfield name="cirg_code"/>
			<listfield name="cir_code"/>
			<listfield name="use_code_operador"/>
			<listfield name="crit_status_ini"/>
			<listfield name="crit_status_fin"/>
			<listfield name="cirg_puntaje_prom"/>
			<listfield name="cirg_cant_mon_pendientes" total="true"/>
			<listfield name="cirg_cant_mon_realizados" total="true"/>
			<listfield name="cirg_cant_mon_ok" total="true"/>
			<listfield name="cirg_cant_mon_mal" total="true"/>				
			<listfield name="cirg_cant_mon_cierre_forz" total="true"/>	
			<listfield name="cirg_cant_cap_pendientes" total="true"/>
			<listfield name="cirg_cant_cap_realizados" total="true"/>
			<listfield name="cirg_cant_cap_ok" total="true"/>
			<listfield name="cirg_cant_cap_mal" total="true"/>	

			<action label="monitoreos" target="/lmodules/monitoreos/monitoreos.php?OP=L" operation="L" next="/lmodules/circuitos/cir_groups_oper.php?last=1&amp;OP=L" >
				<sendfield classname="ccir_groups_oper" name="cirg_code"/>
				<sendfield classname="ccir_groups_oper" name="cir_code"/>
				<sendfield classname="ccir_groups_oper" name="use_code_operador"/>				
			</action>
	</build>
</make>
<!--
<make object="class"> 
	<build out_file="coper_desemp.php" classname="coper_desemp" classlabel="Estado de Operadores por Circuitos">
		<parse in_file="circuitos.sql" tablename="cir_groups_oper" />		
		<method SaveDBTotalQuery="select sum(cirg_cant_mon_pendientes) as cirg_cant_mon_pendientes,round(avg(pro_indice),2) as pro_indice , sum(pro_encontrados) as pro_encontrados from prod_agotados"/>
         <method ObjFactoryQuery="select * from cir_groups_oper g join circuitos c on g. "/>
         <method ObjFactoryQuerySuffix=" ORDER BY anio desc, mes desc,pro_indice asc"/>
 		
		<field name="cirg_cant_mon_pendientes" total="true" />
		<field name="cirg_cant_mon_realizados" total="true" />
		<field name="cirg_cant_mon_ok" total="true" />
		<field name="cirg_cant_mon_mal" total="true" />
	</build>
</make>
-->

</ayaxphpclass>